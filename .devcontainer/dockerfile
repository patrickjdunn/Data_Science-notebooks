FROM mcr.microsoft.com/devcontainers/python:3.12-bookworm

# Install system tools
RUN apt-get update && apt-get install -y \
    postgresql-client \
    r-base \
    r-base-dev \
    && rm -rf /var/lib/apt/lists/*

# Install Python packages
RUN pip install --upgrade pip \
    && pip install pandas sqlalchemy psycopg2-binary jupyterlab

# Install R packages + IRkernel
RUN R -e "install.packages(c('IRkernel','tidyverse','janitor','skimr'), repos='https://cloud.r-project.org')" \
    && R -e "IRkernel::installspec(user = FALSE)"
